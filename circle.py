from . import png

mask = [
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  7, 12,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 34,135,252,255,255,255,251,134, 34,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 11,153,255,255,255,255,255,255,255,255,255,153, 11,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0, 25,254,255,255,255,255,255,255,255,255,255,255,255,255, 25,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0, 12,249,255,255,255,255,255,255,255,255,255,255,255,255,255,249, 12,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,156,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,157,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0, 33,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255, 33,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,133,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,133,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,250,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,249,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  6,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,  6,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0, 11,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255, 11,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  6,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,  6,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,249,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,250,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,133,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,133,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0, 33,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255, 33,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,157,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,157,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0, 11,249,255,255,255,255,255,255,255,255,255,255,255,255,255,249, 12,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0, 25,254,255,255,255,255,255,255,255,255,255,255,255,255, 25,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 11,153,255,255,255,255,255,255,255,255,255,153, 11,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 34,134,251,255,255,255,252,134, 34,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  7, 12,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
    [0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
]

def write_circle(filename, color):
    """Write a 32x32 PNG filled with a color and our alpha mask to a file."""
    color.ljust(6, '0')
    r = int(color[0:2], 16)
    g = int(color[2:4], 16)
    b = int(color[4:6], 16)
    if len(color) > 6:
        color.ljust(8, '0')
        a = int(color[6:8], 16)
    else:
        a = 255

    a /= 255.0

    pixels = [[] for i in range(len(mask))]
    for y, row in enumerate(mask):
        for alpha in row:
            alpha = int(alpha * a)
            pixels[y] += [r, g, b, alpha]

    writer = png.Writer(len(mask[0]), len(mask), alpha=True)
    with open(filename, 'wb') as f:
        writer.write(f, pixels)
